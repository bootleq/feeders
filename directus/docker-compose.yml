services:
  directus:
    image: directus/directus:11.1.0
    container_name: feeders-directus
    ports:
      - 8044:8055
    volumes:
      - ./database:/directus/database
      - ./uploads:/directus/uploads
      - ./extensions:/directus/extensions
    environment:
      SECRET_FILE: /run/secrets/secret
      # ADMIN_EMAIL: not-used@feeders.com
      # ADMIN_PASSWORD: not-used
      DB_CLIENT: sqlite3
      DB_FILENAME: /directus/database/data.db
      WEBSOCKETS_ENABLED: true
      # CORS_ENABLED: true
      # CORS_ORIGIN: true
      # PUBLIC_URL: /feeders-cms
      EXT_SANITIZE_HTML_EVENT_SCOPES: "Facts.items.create,Facts.items.update"
      EXT_SANITIZE_HTML_ALLOWED_TAGS: "p,a,b,i,em,strong,blockquote,div,span,hr,ol,ul,li,br,code,kbd"
    secrets:
      - secret

secrets:
  secret:
    file: ./secrets/secret.txt
