# Directus CMS

http://localhost:8044/admin


## Asset management

- Make a `public` folder for user upload instead of default to file library root.
- Turn off storage asset transform, let's use other online service instead.
- Expect storage is defined with Cloudflare R2 backend, see config in [docker-compose.yml](). Note the secret text files must not contain EOL character.

## HTML sanitize extension

- https://github.com/licitdev/directus-extension-sanitize-html

  Note the extension is not flexible configurable so I use a dirty customized
  version instead. Need to build and install locally for every change. And it
  is not published so far.

## General WYSIWYG field settings:

- Custom Formats:

```json
[
  {
    "title": "等寬字",
    "inline": "span",
    "classes": "font-mono"
  },
  {
    "title": "冗長網址",
    "selector": "a[href]",
    "classes": "feeders-mce-lengthy"
  },
  {
    "title": "冗長清單",
    "selector": "ol,ul",
    "classes": "feeders-mce-lengthy"
  },
  {
    "title": "圖說",
    "block": "figure",
    "wrapper": true,
    "classes": "feeders-mce-figure"
  },
  {
    "title": "內嵌容器",
    "block": "p",
    "classes": "feeders-mce-iframe"
  },
  {
    "title": "數值表格",
    "block": "table",
    "selector": "table",
    "classes": "feeders-mce-digit"
  }
]
```

- Options Overrides

```json
{
  "fix_list_elements": true,
  "invalid_elements": "img,h1,h2,h3,h4,h5,h6",
  "content_style": "p { padding-block: 0.25rem; } .font-mono { font-family: monospace; }",
  "content_css": "http://localhost:8055/tinymce/article.css",
  "preview_styles": "color font-size font-family font-weight",
  "sandbox_iframes_exclusions": [
    "youtube.com",
    "youtu.be",
    "bootleq.github.io"
  ]
}

{
  "formats": {
    "bold": {
      "inline": "strong"
    },
    "underline": {
      "inline": "span",
      "classes": "underline",
      "exact": true
    },
    "italic": {
      "inline": "span",
      "classes": "italic"
    },
    "strikethrough": {
      "inline": "span",
      "classes": "line-through",
      "exact": true
    }
  },
  "content_css": "http://localhost:8055/tinymce/general.css",
  "preview_styles": "color font-size font-family font-weight"
}
```

## Other memo

Schema export: http://localhost:8044/schema/snapshot?export=yaml

Random key can be generated by `openssl rand -base64 36`
